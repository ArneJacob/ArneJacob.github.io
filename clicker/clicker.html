<!doctype html>
<html>
<head>
	<title> Clickertest! </title>
	<link href="https://fonts.googleapis.com/css?family=Montserrat|Mukta|Open+Sans" rel="stylesheet">
	<link rel="stylesheet" href="stylesheet.css">
	<link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
	<link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
	<link rel="manifest" href="icons/site.webmanifest">
	<link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
	<link rel="shortcut icon" href="icons/favicon.ico">
	<meta name="msapplication-TileColor" content="#00a300">
	<meta name="msapplication-config" content="icons/browserconfig.xml">
	<meta name="theme-color" content="#ffffff">
	<meta charset="UTF-8">
	<script>
	function setCookie(cname,cvalue,exdays) {
    var d = new Date();
    d.setTime(d.getTime() + (exdays*24*60*60*1000));
    var expires = "expires=" + d.toGMTString();
    document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/";
}
	function getCookie(cname) {
    var name = cname + "=";
    var decodedCookie = decodeURIComponent(document.cookie);
    var ca = decodedCookie.split(';');
    for(var i = 0; i < ca.length; i++) {
        var c = ca[i];
        while (c.charAt(0) == ' ') {
            c = c.substring(1);
        }
        if (c.indexOf(name) == 0) {
            return c.substring(name.length, c.length);
        }
    }
    return "";
}

	function checkCookie() {
			var username = getCookie("username");
			if (username != "") {
					alert("Welcome again " + username);
			} else {
					username = prompt("Please enter your name:", "");
					if (username != "" && username != null) {
							setCookie("username", username, 365);
							document.getElementById("username").innerHTML = username;
					}
			}
	}
	</script>
</head>

<body onload="checkCookie()">
	<section class="bothSections">
	<div class="clicksSection">
	<script>
		var clicks = 0;
		var clicksOnClick = 1;
		var clicksPerSecond = 0
		/*document.getElementById("clicks").innerHTML = clicks;*/

			function onButtonClick() {
				clicks += clicksOnClick;
			document.getElementById("clicks").innerHTML = clicks;
	}

/*function clickCounter() {
		if(typeof(Storage) !== "undefined") {
				if (localStorage.clickcount) {
						localStorage.clickcount = Number(localStorage.clickcount)+1;
				} else {
						localStorage.clickcount = 1;
				}
				document.getElementById("result").innerHTML = "You have " + localStorage.clickcount + " click(s).";
		} else {
				document.getElementById("result").innerHTML = "Sorry, your browser does not support web storage...";
		}*/

		var costBaseExtraclick1 = 25;
		var costExtraclick1 = 25;
		var numberExtraclick1 = 0;
		function buyExtraclick1() {
			if (clicks >= costExtraclick1) {
				clicks -= costExtraclick1
				clicksOnClick += 1;
				numberExtraclick1 += 1;
				costExtraclick1 = Math.pow(1.25, numberExtraclick1) * costBaseExtraclick1;
				costExtraclick1 = Math.round(costExtraclick1);
				document.getElementById("costExtraclick1Text").innerHTML = costExtraclick1;
				document.getElementById("clicksOnClick").innerHTML = clicksOnClick;
	}
}

		var costBaseClickdoubler = 10000;
		var costClickdoubler = 10000;
		var numberClickdoubler = 0;
			function buyClickdoubler() {
				if (clicks >= costClickdoubler) {
					clicks -= costClickdoubler
					numberClickdoubler += 1;
					clicksOnClick *= 2;
					costClickdoubler = Math.pow(2, numberClickdoubler) * costBaseClickdoubler;
					costClickdoubler = Math.round(costClickdoubler);
					document.getElementById("costClickdoublerText").innerHTML = costClickdoubler;
					document.getElementById("numberClickdoublerText").innerHTML = numberClickdoubler;
				}
			}


		var costBaseAutoclick1 = 25;
		var costAutoclick1 = 25;
		var numberAutoclick1 = 0;
		var costAutoclick1Text = costAutoclick1;
		function buyAutoclick1() {
			if (clicks >= costAutoclick1) {
				clicks -= costAutoclick1;{
				numberAutoclick1 += 1;
				clicksPerSecond += 1;
				costAutoclick1 = Math.pow(1.25, numberAutoclick1) * costBaseAutoclick1;
				costAutoclick1 = Math.round(costAutoclick1);
				document.getElementById("costAutoclick1Text").innerHTML = costAutoclick1;
				document.getElementById("numberAutoclick1Text").innerHTML = numberAutoclick1;
			}
		}
	}

	var costBaseAutoclick2 = 250;
	var costAutoclick2 = 250;
	var numberAutoclick2 = 0;
	var costAutoclick2Text = costAutoclick2;
	function buyAutoclick2() {
		if (clicks >= costAutoclick2) {
			clicks -= costAutoclick2;{
			numberAutoclick2 += 1;
			clicksPerSecond += 5;
			costAutoclick2 = Math.pow(1.25, numberAutoclick2) * costBaseAutoclick2;
			costAutoclick2 = Math.round(costAutoclick2);
			document.getElementById("costAutoclick2Text").innerHTML = costAutoclick2;
			document.getElementById("numberAutoclick2Text").innerHTML = numberAutoclick2;
		}
	}
}

	var costBaseAutoclick3 = 1000;
	var costAutoclick3 = 1000;
	var numberAutoclick3 = 0;
	var costAutoclick3Text = costAutoclick3;
	function buyAutoclick3() {
		if (clicks >= costAutoclick3) {
			clicks -= costAutoclick3;{
			numberAutoclick3 += 1;
			clicksPerSecond += 10;
			costAutoclick3 = Math.pow(1.25, numberAutoclick3) * costBaseAutoclick3;
			costAutoclick3 = Math.round(costAutoclick3);
			document.getElementById("costAutoclick3Text").innerHTML = costAutoclick3;
			document.getElementById("numberAutoclick3Text").innerHTML = numberAutoclick3;
		}
	}
}
var click_acc = 0

setInterval(function autoclickers(){
	click_acc += getRealClicksPerSecond()/100;
  if (click_acc >= 1){
    let a = Math.floor(click_acc)
    click_acc -= a
    clicks += a
  }
}, 10)

setInterval(function updateclicks(){
    clicks = clicks;
    document.getElementById("clicks").innerHTML = clicks;
}, 100)

function getRealClicksPerSecond(){
  let a = clicksPerSecond;
  if(numberClickdoubler >= 1){
    a*=2*numberClickdoubler;
  }
  return a;
}
setInterval(function updateClicksPerSecond() {
	document.getElementById("clicksPerSecond").innerHTML = getRealClicksPerSecond();
})
setInterval(function titleUpdater() {
	document.title = "You have " + clicks + " clicks!"
}, 200)

</script>

<h1>Welcome to the Arne Jacob Clicker Game</h1>
<p><button class="BigButton" onClick="onButtonClick()"><img src="cookie2.png"/></button></p>
<h3>Clicks: <span id="clicks">0</span></h3>
<h3>Clicks per second: <span id="clicksPerSecond">0</span></h3>
<p>Click the button to obtain clicks.</p><br>

<div class="nameSection"> <p> Welcome user: <span id="username"></span></p></div></div>
<div class="upgradesSection"> <p>Upgrades:</p>
<p><button class="despacito" onclick="buyExtraclick1()">Buy Extraclick!</button><br> Cost: <span id="costExtraclick1Text">25</span>&nbsp;&nbsp;- Gives one additional click every time you click. (Current clicks per click: <span id="clicksOnClick">1</span>)</p>
<p><button class="despacito2" onclick="buyClickdoubler()">Buy Clickdoubler!</button><br> Cost: <span id="costClickdoublerText">10000</span>&nbsp;&nbsp;- Doubles all clicks. (Current amount of Doublers: <span id="numberClickdoublerText">0</span>)</p>
</div>
<div class="autoClickers"> <p> Automatic Clicking Action: </p>
<p2><button class="despacito3" onclick="buyAutoclick1()" type="button">Buy Level 1 Autoclicker!</button></p>Cost: <span id="costAutoclick1Text">25</span>&nbsp;- Clicks per second +1 (Current amount of clickers: <span id="numberAutoclick1Text">0</span>)</p2><br>
<p3><button class="despacito4" onclick="buyAutoclick2()" type="button">Buy Level 2 Autoclicker!</button></p>Cost: <span id="costAutoclick2Text">250</span>&nbsp;- Clicks per second +5 (Current amount of clickers: <span id="numberAutoclick2Text">0</span>)</p3><br>
<p4><button class="despacito5" onclick="buyAutoclick3()" type="button">Buy Level 3 Autoclicker!</button></p>Cost: <span id="costAutoclick3Text">1000</span>&nbsp;- Clicks per second +10 (Current amount of clickers: <span id="numberAutoclick3Text">0</span>)</p4><br></div>
</section>
</body>
</html>
